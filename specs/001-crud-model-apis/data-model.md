# Phase 1 Data Model Summary

## User and Role Details

User
- email (string, unique, lowercase, required)
- password (string, required)
- full_name (string, required)
- role (enum: unknown, renter, staff, admin; required)
- is_active (boolean, default true)
- phone (string, optional)
- created_at (date, autogenerated)

Admin
- user_id (ObjectId -> User, unique, required)
- title (string, optional)
- notes (string, optional)
- hire_date (date, default now)

Staff
- user_id (ObjectId -> User, unique, required)
- employee_code (string, unique, required)
- position (string, required)
- hire_date (date, default now)

Renter
- user_id (ObjectId -> User, unique, required)
- driver_license_no (string, optional)
- address (string, optional)
- date_of_birth (date, optional)
- risk_score (number 0..100, default 0)

## Catalog

Vehicle
- make (string, required)
- model (string, required)
- model_year (number >= 1900, required)
- category (string, default "EV")
- battery_capacity_kwh (number, optional)
- range_km (number, optional)
- vin_number (string, unique, optional)
- img_url (string, optional)
- is_active (boolean, default true)
- created_at (date)

Station
- name (string, required)
- address (string, required)
- latitude (number, optional)
- longitude (number, optional)
- is_active (boolean, default true)
- created_at (date)

## Operational

Booking
- renter_id (ObjectId -> Renter, required)
- vehicle_at_station_id (ObjectId -> VehicleAtStation, required)
- expected_return_datetime (date, optional)
- status (enum: pending_verification, verified, cancelled; required)
- verification_status (enum: pending, approved, rejected_mismatch, rejected_other; required)
- verified_by_staff_id (ObjectId -> Staff, optional)
- verified_at (date, optional)
- cancel_reason (string, optional)
- total_booking_fee_amount (number, required)
- deposit_fee_amount (number, required)
- rental_fee_amount (number, required)
- created_at (date)

Rental
- booking_id (ObjectId -> Booking, unique, required)
- vehicle_id (ObjectId -> Vehicle, required)
- pickup_datetime (date, required)
- expected_return_datetime (date, optional)
- actual_return_datetime (date, optional)
- status (enum: reserved, in_progress, completed, late, cancelled; required)
- score (number or null)
- comment (string, optional)
- rated_at (date, optional)
- created_at (date)

Payment
- method (enum: unknown, cash, bank_transfer; required)
- status (enum: paid, refunded; required)
- amount_paid (number, required)
- transaction_code (string, optional)
- created_at (date)

## Deletion policy (Phase 1)
- Soft-delete (set `is_active=false`) for User, Vehicle, Station.
- Hard-delete for Booking/Rental/Payment only if no downstream references;
  otherwise block and return a clear conflict/error message.
